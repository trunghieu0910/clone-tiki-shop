(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"0itn":function(e,n,t){"use strict";var o=t("etRO"),r=t("4jfz"),a=t("mHfP"),i=t("1U+3"),c=t("DY1Z"),u=t("mXGw"),s=t.n(u),l=t("BncV"),d=t("m6w3"),p=t("/dBk"),f=t.n(p),h=t("qd51"),g=t("9OMS"),m=t.n(g),v=t("YFs1"),b=t.n(v),y=t("edSL"),O=t.n(y),k=t("RQuD"),w=s.a.createElement;function x(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?x(Object(t),!0).forEach((function(n){Object(d.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function C(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,o=Object(c.a)(e);if(n){var r=Object(c.a)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Object(i.a)(this,t)}}var S=864e5,P=function(e){Object(a.a)(t,e);var n=C(t);function t(){var e;Object(o.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).timeout=null,e.timeoutToastBottom=null,e.COUPON_DELIVERY=null,e.COUPON_IN_LOCALSTORAGE=null,e.state={isOpen:!1,coupon:{},applied:!1,replace:!1,toastOpen:!1,toastMessage:"",showButtonRemoveCoupon:!1},e.showModal=function(){e.setState({isOpen:!0})},e.closeModal=function(){e.setState({isOpen:!1})},e.showToast=function(){e.setState({toastOpen:!0})},e.closeToast=function(){e.setState({toastOpen:!1})},e.getCouponInfo=function(){var n=Object(h.a)(f.a.mark((function n(t){var o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(k.a)({url:"v2/gum-delivery/coupon?ruleId=".concat(t)});case 3:o=n.sent,e.setState({coupon:o.data.data}),o.data.data.expiredAt-+new Date<=0||e.showModal(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}(),e.renderDate=function(e){var n=new Date(e),t=n.getDate(),o=n.getMonth()+1,r=n.getFullYear();return"".concat(t<10?"0".concat(t):t,"/").concat(o<10?"0".concat(o):o,"/").concat(r)},e.validateCoupon=function(){e.state.coupon.expiredAt-+new Date<=0?(e.closeModal(),e.setState({toastMessage:'M\xe3 gi\u1ea3m gi\xe1 "'.concat(e.state.coupon.couponCode,'" \u0111\xe3 h\u1ebft h\u1ea1n s\u1eed d\u1ee5ng')},e.showToast),e.timeoutToastBottom=setTimeout((function(){e.closeToast()}),5e3)):e.COUPON_IN_LOCALSTORAGE&&e.COUPON_IN_LOCALSTORAGE.couponCode!==e.state.coupon.couponCode?e.setState({replace:!0}):e.applyCoupon()},e.applyCoupon=function(){b()(e.state.coupon)||window.localStorage.setItem("COUPON_DELIVERY",JSON.stringify(e.state.coupon)),e.setState({applied:!0},(function(){e.timeout=setTimeout((function(){e.setState({applied:!1})}),3e3)})),e.closeModal()},e.renderTime=function(){var n=e.state.coupon.expiredAt-+new Date;return n>=S?"24 gi\u1edd":n<36e5?"".concat(Math.round(n/1e3/60)," ph\xfat"):"".concat(Math.round(n/1e3/60/60)," gi\u1edd")},e.renderPrevCouponCode=function(){return b()(e.COUPON_IN_LOCALSTORAGE)?null:e.COUPON_IN_LOCALSTORAGE.couponCode||""},e.renderCurrentCouponCode=function(){return e.state.coupon.couponCode||""},e.checkExpiredInClient=function(){b()(e.COUPON_IN_LOCALSTORAGE)||e.COUPON_IN_LOCALSTORAGE.expiredAt-+new Date<=0&&e.removeCouponInStorage()},e.removeCouponInStorage=function(){window.localStorage.removeItem("COUPON_DELIVERY")},e.applyCouponInCart=Object(h.a)(f.a.mark((function n(){var t,o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(b()(e.COUPON_IN_LOCALSTORAGE)){n.next=15;break}return n.prev=1,n.next=4,Object(k.a)({url:"v2/carts/mine/coupons/".concat(e.COUPON_IN_LOCALSTORAGE.couponCode),method:"PUT"});case 4:e.removeCouponInStorage(),e.refreshPage(),n.next=15;break;case 8:n.prev=8,n.t0=n.catch(1),t=O()(n.t0,"responseJSON.error.message","C\xf3 l\u1ed7i x\u1ea3y ra"),502===(o=O()(n.t0,"responseJSON.error.code",0))?e.removeCouponInStorage():99===o&&(t='M\xe3 gi\u1ea3m gi\xe1 "'.concat(e.COUPON_IN_LOCALSTORAGE.couponCode,'" \u0111\xe3 h\u1ebft h\u1ea1n s\u1eed d\u1ee5ng'),e.removeCouponInStorage()),e.setState({showButtonRemoveCoupon:501===o,toastMessage:t},e.showToast),e.timeoutToastBottom=setTimeout(e.closeToast,5e3);case 15:case"end":return n.stop()}}),n,null,[[1,8]])}))),e.refreshPage=function(){window.location.reload()},e}return Object(r.a)(t,[{key:"getValueQueryString",value:function(e){if(1!==window.location.href.indexOf("?")){var n=window.location.href.split("?")[1];if(n&&n.length){if(-1===n.indexOf("&")){var t=n.split("=");return t[0]===e?t[1]:null}var o=n.split("&");return(o=o.map((function(e){var n=e.split("=");return Object(d.a)({},n[0],n[1])})).reduce((function(e,n){return _(_({},e),n)}),{}))[e]||null}return null}}},{key:"componentDidMount",value:function(){this.COUPON_DELIVERY=window.localStorage.getItem("COUPON_DELIVERY"),this.COUPON_IN_LOCALSTORAGE=b()(this.COUPON_DELIVERY)?null:JSON.parse(this.COUPON_DELIVERY);var e=this.getValueQueryString("promoId"),n="/checkout/cart"===window.location.pathname;this.checkExpiredInClient(),n||e&&e.length&&this.getCouponInfo(e)}},{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout),this.timeoutToastBottom&&clearTimeout(this.timeoutToastBottom)}},{key:"render",value:function(){var e=this.state,n=e.isOpen,t=e.coupon,o=e.applied,r=e.replace,a=e.toastOpen,i=e.toastMessage,c=e.showButtonRemoveCoupon;return b()(t)?null:w("div",null,w(m.a,{shouldCloseOnOverlayClick:!1,isOpen:n,onRequestClose:this.closeModal,style:{content:{overflow:"visible",padding:0,width:"400px",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9999}}},r?w("div",{className:"coupon-delivery-confirm","data-view-id":"coupon_delivery"},w("div",{className:"coupon-delivery-confirm__title"},"Th\xf4ng tin \u01b0u \u0111\xe3i"),w("div",{className:"coupon-delivery-confirm__content"},'M\xe3 gi\u1ea3m gi\xe1 "',this.renderCurrentCouponCode(),'" s\u1ebd \u0111\u01b0\u1ee3c thay th\u1ebf cho m\xe3 "',this.renderPrevCouponCode(),'" \u0111\xe3 \u0111\u01b0\u1ee3c l\u01b0u tr\u01b0\u1edbc \u0111\xf3 v\xe0 t\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng v\xe0o gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n khi tho\u1ea3 \u0111i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng.'),w("div",{className:"coupon-delivery-confirm__buttons"},w("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery-confirm__cancel",onClick:this.closeModal},"B\u1ecf Qua"),w("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery-confirm__replace",onClick:this.applyCoupon},"\u0110\u1ed3ng \xdd"))):w("div",{className:"coupon-delivery"},w("button",{className:"coupon-delivery__close",onClick:this.closeModal},"\xd7"),w("div",{className:"coupon-delivery__note"},"B\u1ea1n \u0111\u01b0\u1ee3c t\u1eb7ng 1 m\xe3 gi\u1ea3m gi\xe1"),w("div",{className:"coupon-delivery__coupon"},t.couponCode),w("div",{className:"coupon-delivery__content"},t.description,w("div",{style:{marginTop:8}},"H\u1ea1n s\u1eed d\u1ee5ng: ",this.renderDate(t.expiredAt),".")),w("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery__button",onClick:this.validateCoupon},"\xc1P D\u1ee4NG M\xc3"))),w("div",{className:"coupon-delivery-toast ".concat(o?"coupon-delivery-toast--open":"")},w("img",{src:"https://salt.tikicdn.com/ts/upload/92/fa/9c/8adbbc5c9f9d81d3d77681f29c5b49d1.png",alt:"icon",className:"coupon-delivery-toast__icon"}),"Trong v\xf2ng ",this.renderTime(),", m\xe3 gi\u1ea3m gi\xe1 s\u1ebd \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng \xe1p d\u1ee5ng v\xe0o gi\u1ecf h\xe0ng c\u1ee7a b\u1ea1n khi tho\u1ea3 \u0111i\u1ec1u ki\u1ec7n s\u1eed d\u1ee5ng"),w("div",{className:"coupon-delivery-toast-bottom ".concat(a?"coupon-delivery-toast-bottom--open":"")},w("div",{className:"coupon-delivery-toast-bottom__content"},i),c&&w("button",{"data-view-id":"coupon_delivery_button",className:"coupon-delivery-toast-bottom__button",onClick:this.removeCouponInStorage},"H\u1ee7y")),w("style",{dangerouslySetInnerHTML:{__html:"\n.coupon-delivery {\npadding: 24px;\nbackground-image:\nurl(https://salt.tikicdn.com/ts/upload/e3/e8/69/e414774fae5f790c26664ce780cb690e.png), url(https://salt.tikicdn.com/ts/upload/51/dd/24/c276ae585e8335620aebb4acf8769507.png);\nbackground-size: 32px 32px, 255px 69px;\nbackground-repeat: no-repeat, no-repeat;\nbackground-position: left bottom, right top;\n}\n\n.coupon-delivery__close {\nwidth: 32px;\nheight: 32px;\nbackground: #fff;\ncolor:#242424;\nfont-size: 20px;\ntext-align: center;\nline-height: 32px;\nposition: absolute;\nright: -16px;\ntop: -16px;\nz-index: 9999;\nborder-radius: 50%;\nborder: 0;\npadding: 0;\n}\n.coupon-delivery__note {\nfont-size: 15px;\nfont-weight: 500;\nline-height: 1.6;\ncolor: #ff3776;\ntext-transform: uppercase;\nmargin: 0 0 12px;\n}\n.coupon-delivery__coupon {\nfont-size: 32px;\nline-height: 40px;\nfont-weight: 500;\ncolor: #242424;\nmargin: 0 0 12px;\ntext-transform: uppercase;\n}\n.coupon-delivery__content {\nfont-size: 15px;\nline-height: 24px;\nmargin: 0 0 24px;\n}\n.coupon-delivery__button {\nheight: 40px;\nbackground-color: #0d5cb6;\ntext-align: center;\nborder: 0;\npadding: 0;\nfont-size: 15px;\nline-height: 40px;\ncolor: #fff;\nfont-weight: 500;\nwidth: 100%;\nborder-radius: 4px;\ncursor: pointer;\n}\n\n.coupon-delivery-toast {\nposition: fixed;\nz-index: 9999;\nwidth: 280px;\nborder-radius: 16px;\nbackground-color: rgba(0, 0, 0, 0.87);\nleft: 50%;\ntop: 50%;\ntransform: translate(-50%, -50%) scale(0.7);\ncolor: #fff;\ntext-align: center;\nfont-size: 13px;\nline-height: 20px;\npadding: 16px;\nuser-select: none;\ntransition-duration: 0.3s;\nvisibility: hidden;\nopacity: 0;\n}\n\n.coupon-delivery-toast--open {\nvisibility: visible;\nopacity: 1;\ntransform: translate(-50%, -50%) scale(1);\n}\n\n.coupon-delivery-toast__icon {\nwidth: 40px;\nheight: 40px;\nmargin: 0 auto 8px;\ndisplay: block;\n}\n\n.coupon-delivery-confirm {\npadding: 24px;\n}\n.coupon-delivery-confirm__title {\nfont-size: 20px;\nline-height: 28px;\nfont-weight: 500;\nmargin: 0 0 12px;\n}\n\n.coupon-delivery-confirm__content {\nfont-size: 15px;\nline-height: 24px;\nmargin: 0 0 24px;\n}\n\n.coupon-delivery-confirm__buttons {\ndisplay: flex;\njustify-content: space-between;\n}\n\n.coupon-delivery-confirm__cancel {\nwidth: 170px;\nheight: 40px;\nborder-radius: 4px;\nborder: 1px solid #0d5cb6;\ncolor: #0d5cb6;\ntext-align: center;\nfont-size: 15px;\nline-height: 40px;\nfont-weight: 500;\n}\n\n.coupon-delivery-confirm__replace{\nfont-size: 15px;\nline-height: 40px;\nfont-weight: 500;\nwidth: 170px;\nheight: 40px;\nborder-radius: 4px;\ncolor: #fff;\nbackground-color: #0d5cb6;\ntext-align: center;\nborder: 0;\n}\n\n.coupon-delivery-toast-bottom {\nposition: fixed;\nz-index: 9999;\nborder-radius: 8px;\nbackground-color: rgba(0, 0, 0, 0.87);\nleft: 50%;\nbottom: 32px;\ncolor: #fff;\nfont-size: 13px;\nline-height: 20px;\npadding: 16px;\nuser-select: none;\ntransition-delay: 0.2s;\ntransition-duration: 0.5s;\nvisibility: hidden;\nopacity: 0;\ntransform: translate(-50%, 0) rotateX(-90deg);\ntransform-origin: bottom center;\ndisplay: flex;\nmax-width: 400px;\n}\n\n.coupon-delivery-toast-bottom--open {\nvisibility: visible;\nopacity: 1;\ntransform: translate(-50%, -50%) rotateX(0deg);\n}\n\n.coupon-delivery-toast-bottom__content {\nflex: 1;\n}\n\n.coupon-delivery-toast-bottom__button {\nbackground:0;\nfont-size: 13px;\nline-height: 20px;\ncolor: #1ba8ff;\nborder: 0;\npadding: 10px 0 10px 12px;\ntext-transform: uppercase;\noutline: 0;\n}\n"}}))}}]),t}(u.Component),N=t("rUI0"),T=t("y6OP"),j=t("6jNK"),R=t("5UAf"),I=t("/gfI"),M=t.n(I),E=t("Ld9l"),L=t.n(E),H=t("pWCa"),U=t.n(H),A=t("dAGg"),D=t("ZLCB"),G=t.n(D),z=t("/m4v"),B=t("cnbf"),F=t("zjXh"),V=t("slGX"),q=t("EGvr"),W=t("3CPd"),Y=t("IF/j"),X=t("y1FF"),J=t("wml6"),Q=t("xEuF"),Z=s.a.createElement;function K(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,o=Object(c.a)(e);if(n){var r=Object(c.a)(this).constructor;t=Reflect.construct(o,arguments,r)}else t=o.apply(this,arguments);return Object(i.a)(this,t)}}var $=j.Router,ee=L()((function(){return t.e(277).then(t.bind(null,"Qmbf"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["Qmbf"]},modules:["/src/next-app-desktop/components/TikiNGON/common/DetectLocationForTikiNgon"]}}),ne=L()((function(){return Promise.all([t.e(47),t.e(26),t.e(29),t.e(50),t.e(61)]).then(t.bind(null,"MvZP"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["MvZP"]},modules:["./Header/UserModal"]}}),te=L()((function(){return Promise.all([t.e(134),t.e(12),t.e(235)]).then(t.bind(null,"ZXlv"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["ZXlv"]},modules:["/src/next-app-desktop/components/LoginModalV2"]}}),oe=(L()((function(){return Promise.all([t.e(36),t.e(22),t.e(34),t.e(111),t.e(211)]).then(t.bind(null,"j035"))}),{ssr:!0,loading:function(){return Z("div",{style:{height:96,backgroundColor:T.a.vividBlue}})},loadableGenerated:{webpack:function(){return["j035"]},modules:["./Header"]}}),L()((function(){return Promise.all([t.e(36),t.e(22),t.e(34),t.e(111),t.e(214)]).then(t.bind(null,"aB9K"))}),{ssr:!0,loading:function(){return Z("div",{style:{height:96,backgroundColor:T.a.white}})},loadableGenerated:{webpack:function(){return["aB9K"]},modules:["./Header/HomeRevampHeader"]}})),re=L()((function(){return Promise.all([t.e(34),t.e(40),t.e(314)]).then(t.bind(null,"RYlH"))}),{ssr:!0,loading:function(){return Z("div",{style:{height:96,backgroundColor:T.a.green_50}})},loadableGenerated:{webpack:function(){return["RYlH"]},modules:["./Header/TikiNgonHeader"]}}),ae=L()((function(){return Promise.all([t.e(26),t.e(29),t.e(323)]).then(t.bind(null,"+TYF"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["+TYF"]},modules:["./Header/UserPhoneModal"]}}),ie=L()((function(){return t.e(242).then(t.bind(null,"CAo/"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["CAo/"]},modules:["./Header/OTPRequired/index"]}}),ce=L()((function(){return Promise.all([t.e(26),t.e(29),t.e(206)]).then(t.bind(null,"bUFb"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["bUFb"]},modules:["./Header/ForgotPasswordModal"]}}),ue=L()((function(){return Promise.all([t.e(47),t.e(50),t.e(234)]).then(t.bind(null,"c3o/"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["c3o/"]},modules:["./Header/LocationModal"]}}),se=L()((function(){return Promise.all([t.e(15),t.e(221)]).then(t.bind(null,"ePid"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["ePid"]},modules:["./InitialSDK"]}}),le=L()((function(){return Promise.all([t.e(17),t.e(220)]).then(t.bind(null,"5rP/"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["5rP/"]},modules:["./InitialChatBot"]}}),de=L()((function(){return Promise.all([t.e(120),t.e(205)]).then(t.bind(null,"C/Os"))}),{ssr:!0,loading:function(){return null},loadableGenerated:{webpack:function(){return["C/Os"]},modules:["./Footer"]}}),pe=L()((function(){return Promise.all([t.e(18),t.e(27),t.e(40),t.e(298)]).then(t.bind(null,"Th/P"))}),{ssr:!0,loading:function(){return Z("div",{style:{backgroundColor:"white",height:180}})},loadableGenerated:{webpack:function(){return["Th/P"]},modules:["./Footer/SPCBottomCategoryList"]}}),fe=L()((function(){return Promise.all([t.e(18),t.e(27),t.e(218)]).then(t.bind(null,"kwRW"))}),{ssr:!0,loading:function(){return Z("div",{style:{backgroundColor:"white",height:180}})},loadableGenerated:{webpack:function(){return["kwRW"]},modules:["./Footer/HubBottomCategoryList"]}}),he=L()((function(){return Promise.all([t.e(19),t.e(21),t.e(20),t.e(28),t.e(147)]).then(t.bind(null,"PEi0"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["PEi0"]},modules:["/src/next-app-desktop/components/desktop/HomePage/HomePersonalWidget/DynamicWidgets/Reward/components/FlashSwap"]}}),ge=L()((function(){return t.e(203).then(t.bind(null,"s9vB"))}),{ssr:!1,loading:function(){return null},loadableGenerated:{webpack:function(){return["s9vB"]},modules:["/src/next-app-desktop/components/FloatyIcon"]}}),me=function(e){Object(a.a)(t,e);var n=K(t);function t(e){var r;return Object(o.a)(this,t),(r=n.call(this,e)).handleProcessBar=function(){$.onRouteChangeStart=function(e){G.a.start(),window.dataLayer&&(window.dataLayer=[])},$.onRouteChangeComplete=function(e){var n;G.a.done();var t=(null===(n=r.props)||void 0===n?void 0:n.customer)||{},o=t.email,a=t.id;o&&a&&(Object(X.a)({email:o,id:a}),Object(R.a)(a)),Object(X.b)(),Object(F.a)(),r.props.handleCartNotification(!1)},$.onRouteChangeError=function(e,n){G.a.done()}},r.renderHeader=function(){var e=r.props,n=e.layout,t=e.freeShipHomeHeader,o=e.showStoreInfoBar,a=e.initialSearchValue,i=e.universalFreeShipPlus;switch(n){case"tikingon-hub-search":return Z(re,r.props.headerProps);case"tikingon":return Z(re,{initialSearchValue:a});case"reward-hub":return Z(oe,{freeShipHomeHeader:t,universalFreeShipPlus:i,isRevamp:!0});case"tikingon-spc":return Z(re,{isSPC:!0,showStoreInfoBar:o,initialSearchValue:a});case"header-empty":return null;case"home-revamp":default:return Z(oe,{freeShipHomeHeader:t,universalFreeShipPlus:i,isRevamp:!0})}},r.renderAboveFooter=function(){var e=r.props,n=e.layout,t=e.hasBottomCategoryList,o=e.isServer;switch(n){case"tikingon-spc":return Z(pe,{isServer:o});case"tikingon":return t?Z(fe,{isServer:o}):null;default:return null}},Object(q.q)(),r}return Object(r.a)(t,[{key:"componentDidMount",value:function(e){this.handleProcessBar();var n=this.props.router;Object(Y.a)(n)&&this.props.fetchHeaderKeywords(!1,Object(Y.o)(n))}},{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.login,o=n.customer,r=n.router;M()(e.customer,o)||(t&&Object(V.d)(o),Object(q.i)()&&this.props.handleUserPhoneModal());Object(Y.a)(r)&&(e.router.route===r.route&&M()(e.router.query,r.query)||this.props.fetchHeaderKeywords(!1,Object(Y.o)(r)))}},{key:"render",value:function(){var e=this.props,n=e.children,t=e.className,o=e.build_version,r=e.locationModal,a=e.loginModal,i=e.userPhoneModal,c=e.forgotPasswordModal,u=e.logPageView,s=e.otpModal,l=e.chatBotEnable,d=e.loginV2Enable,p=e.useReferrer,f=e.extraFooter,h=e.hiddenFooter,g=e.mainStyle,m=void 0===g?{}:g,v=e.customHead,b=e.layout,y=void 0===b?"":b,O=e.isServer,k=e.router,w=e.floatyIconEnable,x=e.pageName,_=Object(q.c)();return Z("div",{className:t},Z(W.b,null),Z(U.a,null,Z("title",null,"Mua H\xe0ng Tr\u1ef1c Tuy\u1ebfn Uy T\xedn v\u1edbi Gi\xe1 R\u1ebb H\u01a1n t\u1ea1i Tiki.vn"),Z("meta",{name:"description",content:"Th\u1ecfa s\u1ee9c mua s\u1eafm qua m\u1ea1ng h\xe0ng ng\xe0n m\u1eb7t h\xe0ng s\xe1ch, \u0111i\u1ec7n t\u1eed, \u0111\u1ed3 gia d\u1ee5ng, qu\xe0 t\u1eb7ng, th\u1eddi trang, l\xe0m \u0111\u1eb9p & s\u1ee9c kh\u1ecfe t\u1ea1i Tiki v\u1edbi gi\xe1 r\u1ebb h\u01a1n v\xe0 khuy\u1ebfn m\xe3i h\u1ea5p d\u1eabn"}),Z("link",{href:"".concat("https://frontend.tikicdn.com/_desktop-next","/static/css/_sprite.css?v=").concat(o),rel:"stylesheet",type:"text/css"}),v&&v),p&&Z(N.a,null),this.renderHeader(),(null===y||void 0===y?void 0:y.includes("tikingon"))&&Z(ee,{layout:y,isServer:O,mainStyle:m,header:this.renderHeader()}),Z("main",{style:m},n),this.renderAboveFooter(),!h&&Z(de,{extraFooter:f}),r.visible&&Z(ue,null),a.visible&&Z(d?te:ne,null),i.visible&&(d?Z(te,{hasToVerify:!0}):Z(ae,null)),s.visible&&Z(ie,null),c.visible&&Z(ce,null),k.query.flashSwap&&"1"===k.query.flashSwap&&!_&&Z(he,{isOpen:!0,mode:k.query.mode||"tab"}),Z(J.a,null,Z("link",{href:"".concat("https://frontend.tikicdn.com/_desktop-next","/static/css/_icomoon.css?v=").concat(o),rel:"stylesheet",type:"text/css"}),Z(se,{logPageView:u,customer:this.props.customer,router:this.props.router,route:this.props.router?this.props.router.route:void 0}),l&&Z(le,null),Z(P,null)),w&&Z(ge,{pageName:x}))}}]),t}(s.a.Component);n.a=Object(z.b)((function(e){return{build_version:e.desktop.layout.build_version,login:e.desktop.app.login,customer:e.desktop.app.customer,locationModal:e.desktop.layout.locationModal,loginModal:e.desktop.layout.loginModal,userPhoneModal:e.desktop.layout.userPhoneModal,forgotPasswordModal:e.desktop.layout.forgotPasswordModal,logPageView:e.desktop.layout.logPageView,otpModal:e.desktop.layout.otpModal,chatBotEnable:O()(e,"desktop.app.webConfig.desktopWeb.chatBotEnable",!0),loginV2Enable:O()(e,"desktop.app.webConfig.desktopWeb.loginV2Enable",!0),freeShipHomeHeader:O()(e,"desktop.app.webConfig.desktopWeb.freeship_home_header",{}),universalFreeShipPlus:O()(e,"desktop.app.webConfig.desktopWeb.universal_freeship_plus",{}),deliveryZone:Object(Q.d)()}}),(function(e){return{fetchHeaderKeywords:Object(B.b)(l.b,e),handleUserPhoneModal:Object(B.b)(l.k,e),handleCartNotification:Object(B.b)(l.f,e)}}))(Object(A.withRouter)(me))},ZLCB:function(e,n,t){var o,r;void 0===(r="function"===typeof(o=function(){var e={version:"0.2.0"},n=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function t(e,n,t){return e<n?n:e>t?t:e}function o(e){return 100*(-1+e)}function r(e,t,r){var a;return(a="translate3d"===n.positionUsing?{transform:"translate3d("+o(e)+"%,0,0)"}:"translate"===n.positionUsing?{transform:"translate("+o(e)+"%,0)"}:{"margin-left":o(e)+"%"}).transition="all "+t+"ms "+r,a}e.configure=function(e){var t,o;for(t in e)void 0!==(o=e[t])&&e.hasOwnProperty(t)&&(n[t]=o);return this},e.status=null,e.set=function(o){var c=e.isStarted();o=t(o,n.minimum,1),e.status=1===o?null:o;var u=e.render(!c),s=u.querySelector(n.barSelector),l=n.speed,d=n.easing;return u.offsetWidth,a((function(t){""===n.positionUsing&&(n.positionUsing=e.getPositioningCSS()),i(s,r(o,l,d)),1===o?(i(u,{transition:"none",opacity:1}),u.offsetWidth,setTimeout((function(){i(u,{transition:"all "+l+"ms linear",opacity:0}),setTimeout((function(){e.remove(),t()}),l)}),l)):setTimeout(t,l)})),this},e.isStarted=function(){return"number"===typeof e.status},e.start=function(){e.status||e.set(0);var t=function(){setTimeout((function(){e.status&&(e.trickle(),t())}),n.trickleSpeed)};return n.trickle&&t(),this},e.done=function(n){return n||e.status?e.inc(.3+.5*Math.random()).set(1):this},e.inc=function(n){var o=e.status;return o?("number"!==typeof n&&(n=(1-o)*t(Math.random()*o,.1,.95)),o=t(o+n,0,.994),e.set(o)):e.start()},e.trickle=function(){return e.inc(Math.random()*n.trickleRate)},function(){var n=0,t=0;e.promise=function(o){return o&&"resolved"!==o.state()?(0===t&&e.start(),n++,t++,o.always((function(){0===--t?(n=0,e.done()):e.set((n-t)/n)})),this):this}}(),e.render=function(t){if(e.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var r=document.createElement("div");r.id="nprogress",r.innerHTML=n.template;var a,c=r.querySelector(n.barSelector),s=t?"-100":o(e.status||0),l=document.querySelector(n.parent);return i(c,{transition:"all 0 linear",transform:"translate3d("+s+"%,0,0)"}),n.showSpinner||(a=r.querySelector(n.spinnerSelector))&&d(a),l!=document.body&&u(l,"nprogress-custom-parent"),l.appendChild(r),r},e.remove=function(){s(document.documentElement,"nprogress-busy"),s(document.querySelector(n.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&d(e)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var a=function(){var e=[];function n(){var t=e.shift();t&&t(n)}return function(t){e.push(t),1==e.length&&n()}}(),i=function(){var e=["Webkit","O","Moz","ms"],n={};function t(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,n){return n.toUpperCase()}))}function o(n){var t=document.body.style;if(n in t)return n;for(var o,r=e.length,a=n.charAt(0).toUpperCase()+n.slice(1);r--;)if((o=e[r]+a)in t)return o;return n}function r(e){return e=t(e),n[e]||(n[e]=o(e))}function a(e,n,t){n=r(n),e.style[n]=t}return function(e,n){var t,o,r=arguments;if(2==r.length)for(t in n)void 0!==(o=n[t])&&n.hasOwnProperty(t)&&a(e,t,o);else a(e,r[1],r[2])}}();function c(e,n){return("string"==typeof e?e:l(e)).indexOf(" "+n+" ")>=0}function u(e,n){var t=l(e),o=t+n;c(t,n)||(e.className=o.substring(1))}function s(e,n){var t,o=l(e);c(e,n)&&(t=o.replace(" "+n+" "," "),e.className=t.substring(1,t.length-1))}function l(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function d(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return e})?o.call(n,t,n,e):o)||(e.exports=r)},rUI0:function(e,n,t){"use strict";var o=t("CMaQ"),r=t("dAGg"),a=t("mXGw"),i=Object(r.withRouter)((function(e){return Object(a.useEffect)((function(){o.a.setReferrer(window.location.href)}),[e.router]),null}));n.a=i},xEuF:function(e,n,t){"use strict";t.d(n,"a",(function(){return f})),t.d(n,"b",(function(){return h})),t.d(n,"c",(function(){return m})),t.d(n,"d",(function(){return v})),t.d(n,"g",(function(){return b})),t.d(n,"f",(function(){return y})),t.d(n,"e",(function(){return O}));var o=t("/dBk"),r=t.n(o),a=t("uEoR"),i=t("qd51"),c=t("edSL"),u=t.n(c),s=t("8qar"),l=t.n(s),d=t("cph9"),p=t("RQuD"),f="delivery_zone",h="delivery-zone",g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,t){return navigator.geolocation.getCurrentPosition(n,t,e)}))},m=function(e){var n=e.replace(/Qu\u1eadn/g,"Q.");return n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/qu\u1eadn/g,"Q.")).replace(/Ph\u01b0\u1eddng/g,"P.")).replace(/ph\u01b0\u1eddng/g,"P.")).replace(/Th\xe0nh Ph\u1ed1/g,"TP.")).replace(/Th\xe0nh ph\u1ed1/g,"TP.")).replace(/Th\u1ecb x\xe3/g,"TX.")).replace(/X\xe3/g,"X.")).replace(/x\xe3/g,"X.")).replace(/Th\u1ecb tr\u1ea5n/g,"TT.")).replace(/Huy\u1ec7n/g,"H.")},v=function(){try{var e=localStorage.getItem(h);if(!e)return null;var n=JSON.parse(e),t=d.a.get(f);return u()(n,"data.delivery_zone")===t&&parseInt((new l.a).format("X"))-u()(n,"create_at",0)<=3600?n:(d.a.remove(f),localStorage.removeItem(h),null)}catch(o){return null}},b=function(){var e=Object(i.a)(r.a.mark((function e(n){var t,o,i,c,s,l,g,m,b,y;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=v()){e.next=24;break}if(o=void 0,i=void 0,!n){e.next=12;break}return e.next=8,Object(p.a)([{url:"/v2/me/delivery_zone",method:"get"},{url:"/v2/me/address?limit=10000",method:"get"}]);case 8:c=e.sent,s=Object(a.a)(c,2),o=s[0],i=s[1];case 12:if(!o||!o.data){e.next=18;break}return l=o.data,t={create_at:(new Date).getTime(),data:l},localStorage.setItem(h,JSON.stringify(t)),d.a.set(f,l.delivery_zone),e.abrupt("return",l);case 18:if(!i||!i.data){e.next=24;break}return b=(null===(g=i.data)||void 0===g||null===(m=g.data)||void 0===m?void 0:m.find((function(e){return!0===e.is_default})))||{},t={create_at:(new Date).getTime(),data:b},localStorage.setItem(h,JSON.stringify(t)),d.a.set(f,b.delivery_zone),e.abrupt("return",b);case 24:return y=u()(t,"data"),e.abrupt("return",y);case 28:return e.prev=28,e.t0=e.catch(0),console.log("LOCATION",e.t0),e.abrupt("return",null);case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(n){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(r.a.mark((function e(){var n,t,o,a,i,c,s,l,m,b=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(b.length>0&&void 0!==b[0])||b[0],t={},e.prev=2,e.next=5,Object(p.a)({url:"https://api.tiki.vn/delivery/api/v2/location-detection"});case 5:if(o=e.sent,(a=u()(o,"data.data"))&&a.delivery_zone){e.next=10;break}return console.error("Cannot detect user location."),e.abrupt("return");case 10:if(t={create_at:(new Date).getTime(),data:a},v()||(localStorage.setItem(h,JSON.stringify(t)),d.a.set(f,a.delivery_zone)),!n||!navigator.geolocation){e.next=30;break}return e.next=16,g({enableHighAccuracy:!1});case 16:if(i=e.sent,c=u()(i,"coords.latitude"),s=u()(i,"coords.longitude"),!c||!s){e.next=30;break}return e.next=22,Object(p.a)({url:"/shopping/v1/location-detection",params:{latitude:c,longitude:s}});case 22:if(l=e.sent,(m=u()(l,"data.data"))&&m.delivery_zone){e.next=27;break}return console.error("Cannot detect user location."),e.abrupt("return");case 27:t={create_at:(new Date).getTime(),data:m},localStorage.setItem(h,JSON.stringify(t)),d.a.set(f,m.delivery_zone);case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(2),console.error("User automatic location error occurred",e.t0);case 35:return e.abrupt("return",t.data);case 36:case"end":return e.stop()}}),e,null,[[2,32]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(i.a)(r.a.mark((function e(){var n,t,o,a,i,c,s,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.geolocation){e.next=24;break}return e.prev=1,e.next=4,g({enableHighAccuracy:!1});case 4:if(n=e.sent,t=u()(n,"coords.latitude"),o=u()(n,"coords.longitude"),!t||!o){e.next=17;break}return e.next=10,Object(p.a)({url:"https://api.tiki.vn/delivery/api/v2/location-detection",params:{latitude:t,longitude:o}});case 10:if(a=e.sent,(i=u()(a,"data.data"))&&i.delivery_zone){e.next=15;break}return console.error("Cannot detect user location."),e.abrupt("return");case 15:return c={create_at:(new Date).getTime(),data:i},e.abrupt("return",c.data);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("User automatic location error occurred",e.t0);case 22:e.next=38;break;case 24:return e.prev=24,e.next=27,Object(p.a)({url:"https://api.tiki.vn/delivery/api/v2/location-detection"});case 27:if(s=e.sent,(l=u()(s,"data.data"))&&l.delivery_zone){e.next=32;break}return console.error("Cannot detect user location."),e.abrupt("return");case 32:return d={create_at:(new Date).getTime(),data:l},e.abrupt("return",d.data);case 36:e.prev=36,e.t1=e.catch(24);case 38:case"end":return e.stop()}}),e,null,[[1,19],[24,36]])})));return function(){return e.apply(this,arguments)}}()}}]);